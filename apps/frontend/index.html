<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RlyType | Adaptive Cockpit</title>
    <link rel="stylesheet" href="/src/css/variables.css" />
    <link rel="stylesheet" href="/src/css/layout.css" />
    <link rel="stylesheet" href="/src/css/components.css" />
  </head>
  <body>
    <div id="app-container">
      <!-- SIDEBAR: Command Center -->
      <aside id="sidebar">
        <div class="sidebar-section">
          <div class="sidebar-title">Engine Strategy</div>
          <div class="segmented-control">
            <div class="segmented-option active" data-value="reinforced">Reinforced</div>
            <div class="segmented-option" data-value="sequential">Sequential</div>
          </div>
          <div class="strategy-info">
            <p id="desc-reinforced" class="strategy-desc">
              Dynamically target weaker patterns more for fastest overall growth.
            </p>
            <p id="desc-sequential" class="strategy-desc" style="display: none">
              Pick the current weakest pattern and train till you reach mastery.
            </p>
          </div>
        </div>

        <div class="sidebar-section">
          <div class="sidebar-title">Target Fluidity (fWPM)</div>
          <div class="slider-container">
            <input type="range" id="target-slider" min="10" max="400" value="80" />
            <span class="slider-value" id="target-value">80</span>
          </div>
        </div>

        <div class="sidebar-footer">
          <a href="https://github.com/vinayaksodar/rlytype" target="_blank" class="github-link">
            <svg
              width="18"
              height="18"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <polygon
                points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"
              />
            </svg>
            <span>Star on GitHub</span>
          </a>
        </div>
      </aside>

      <!-- MAIN CONTENT -->
      <main id="main-stage">
        <!-- HEADER -->
        <header id="cockpit-header">
          <!-- Sidebar Toggle (Visual Only for now) -->
          <button
            id="sidebar-toggle"
            style="
              position: absolute;
              left: 1rem;
              background: none;
              border: none;
              color: var(--text-muted);
              cursor: pointer;
            "
          >
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M3 12h18M3 6h18M3 18h18" />
            </svg>
          </button>

          <!-- Mode Selector -->
          <div class="mode-selector">
            <div class="mode-item active">
              <span class="mode-label">Unigram</span>
              <div class="mode-ring"></div>
            </div>
            <div class="mode-item">
              <span class="mode-label">Bigram</span>
              <div class="mode-ring"></div>
            </div>
            <div class="mode-item">
              <span class="mode-label">Trigram</span>
              <div class="mode-ring"></div>
            </div>
          </div>

          <!-- Mastery Widget -->
          <div class="mastery-widget">
            <div class="mastery-info">
              <span class="mastery-label" id="mastery-label">Mastery</span>
              <span class="mastery-value" id="mastery-percent">0%</span>
            </div>
            <div class="mastery-track">
              <div class="mastery-fill" id="mastery-bar" style="width: 0%"></div>
            </div>
          </div>
        </header>

        <!-- HERO STAGE -->
        <section id="hero-stage">
          <!-- Typing Stream -->
          <div id="word-stream">
            <!-- BatchRenderer will inject words here -->
            <div style="opacity: 0.3">Initializing Engine...</div>
          </div>

          <!-- Dynamic Stats Card -->

          <div id="stats-pill">
            <div class="stat-group">
              <span class="stat-label">Session fWPM</span>

              <span class="stat-value" id="stat-wpm">--</span>
            </div>

            <div class="stat-group">
              <span class="stat-label">Current Pattern</span>

              <span class="stat-value" id="stat-pattern">--</span>
            </div>

            <div class="stat-group">
              <span class="stat-label">Accuracy</span>

              <span class="stat-value" id="stat-acc">--</span>
            </div>
          </div>
        </section>

        <!-- ADAPTIVE FOOTER -->

        <footer id="adaptive-footer">
          <!-- Footer Toggle -->
          <button id="footer-toggle" title="Toggle Dashboard">
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M6 9l6 6 6-6" />
            </svg>
          </button>

          <div id="footer-content">
            <!-- Box 1: Dynamic Visualizer -->

            <div class="footer-panel">
              <div class="footer-panel-header">
                <div class="sidebar-title" style="margin: 0">Adaptive Visualizer</div>
              </div>

              <div id="visualizer-container" class="heatmap-container">
                <!-- Satellite Grid will be rendered here -->
              </div>
            </div>

            <!-- Box 2: Mastery Queue -->

            <div class="footer-panel">
              <div class="footer-panel-header">
                <div class="sidebar-title" style="margin: 0">Mastery Queue</div>
              </div>

              <ul class="priority-list" id="priority-list">
                <!-- Example Items -->

                <li class="priority-item bottleneck">
                  <span class="p-pattern">TH</span>

                  <div class="p-stats">
                    <div class="p-bar-bg"><div class="p-bar-fill" style="width: 45%"></div></div>

                    <span class="status-badge bottleneck">Bottleneck</span>
                  </div>
                </li>

                <li class="priority-item drilling">
                  <span class="p-pattern">ING</span>

                  <div class="p-stats">
                    <div class="p-bar-bg"><div class="p-bar-fill" style="width: 72%"></div></div>

                    <span class="status-badge drilling">Drilling</span>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </footer>
      </main>
    </div>

    <!-- Hidden containers for old renderers if needed, or we adapt them -->

    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
